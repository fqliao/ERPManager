<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xidian.CustomerXml"> <!-- 命名空间是文件的包名，定位该文件在哪个包下 -->

	<select id="getCustomerByAuid" parameterType="String" resultType="Customer">
		select customer.*, balance from customer inner join balance on customer.auid = balance.auid and customer.auid like #{auid};

	</select>
	<select id="getCustomerByCode" parameterType="String" resultType="Customer">
		select * from customer where code = #{code};
	</select>

	<select id="getCustomerNameByAuid" parameterType="String" resultType="String">
		select c.customername from customer as c where auid = #{auid};
	</select>

	<select id="getCustomerByAuidToOrder" parameterType="String" resultType="Customer">
		select customer.rank, customer.code, productnum, productprice from customer, rank where auid = #{auid} and state = '注册' and customer.rank = rank.rank;
	</select>

	<select id="getCustomerByName" parameterType="String" resultType="Customer">

		select customer.*, balance.balance from customer inner join balance on customer.auid = balance.auid and customer.customername like #{customerName};
	</select>

	<select id="getCustomerByRank" parameterType="String" resultType="Customer">
		select customer.*, balance from customer inner join balance on customer.auid = balance.auid and customer.rank = #{rank};
	</select>

	<select id="getCustomerByRankAndName" parameterType="Customer" resultType="Customer">
		select customer.*, balance.balance from customer inner join balance on customer.auid = balance.auid and customer.rank = #{rank} and customer.customername like #{customerName};
	</select>

	<select id="getAllCustomer" resultType="Customer">
		select customer.*, balance from customer inner join balance on customer.auid = balance.auid;
	</select>

	<insert id="addCustomer" parameterType="Customer">
		insert into customer (auid,    code,   rank,    customername,    sex,    age,    idcard,      address,    phone,    qq,    weixin,  createtime)
		values               (#{auid}, #{code}, #{rank}, #{customerName}, #{sex}, #{age}, #{idcard}, #{address}, #{phone}, #{qq}, #{weixin}, #{createTime});
	</insert>

	<update id="updateCustomer" parameterType="Customer">
		update customer set rank = #{rank}, customername = #{customerName}, sex = #{sex}, age = #{age}, idcard = #{idcard},
						address = #{address}, phone = #{phone}, qq = #{qq}, weixin = #{weixin}, state = #{state}
						where id = #{id};
	</update>

	<update id="updateCustomerIsUpgrade" parameterType="Customer">
		update customer set isupgrade = #{isUpgrade}, createtime = #{createTime}
		where auid = #{auid};
	</update>

	<update id="updateCustomerOfState" parameterType="Customer">
		update customer set rank = #{rank}, state = #{state}, createtime = #{createTime}
		where auid = #{auid};
	</update>


</mapper>